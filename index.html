<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>BioSpace Menu</title>
</head>
<body>
    <header> 
      <div id="casinha">  <svg id="home" xmlns="http://www.w3.org/2000/svg" fill="white"      viewBox="0 0 24 24" width="35" height="50">
        <path d="M12 3l9 8h-3v9h-12v-9h-3z"/></svg>
      </div>
      <div id="placeholder_form">
        <form method="post"> 
          <input type="text" placeholder="üîé Pesquisar">
        </form>
      </div>
      <div id="title_principal">
        <h1 id="titulo-principal">BioSpace</h1>
      </div>  
    </header>

  <section id="menu">
    <div id="categorias">
      <h2>Categorias</h2>
    </div>

    <div id="submenu-lateral">
      <!-- Submenu aparece aqui -->
    </div>

    <div id="conteudo">
      <!-- Fundo inicial -->
    </div>
  </section>

 <script>
  // variaveis criadas para pegar ids dos documentos
  const categoriasDiv = document.getElementById("categorias");
  const submenuLateral = document.getElementById("submenu-lateral");
  const conteudoDiv = document.getElementById("conteudo");
  const tituloPrincipal = document.getElementById("titulo-principal");
  const home = document.getElementById("home");

  // fun√ß√£o para abrir um iframe na tela depois de clicar no submenu 
  function abrirIframe(url) {
    submenuLateral.classList.remove("active");
    submenuLateral.innerHTML = "";

    conteudoDiv.classList.add("sem-fundo");
    conteudoDiv.innerHTML = `<iframe src="${url}"></iframe>`;

    const iframe = conteudoDiv.querySelector("iframe");
    iframe.addEventListener("load", () => {
      iframe.classList.add("loaded");
    });
  }

  // Pegar categorias do PHP (JSON) ao inv√©s do array est√°tico
  fetch('get_categorias.php')
    .then(res => res.json()) // converte a resposta em JSON
    .then(categorias => {
      // percorre todas as categorias
      categorias.forEach(cat => {
        const btn = document.createElement("button"); // cria bot√£o da categoria
        btn.classList.add("rider"); // adiciona classe
        btn.textContent = cat.nome; // adiciona texto do bot√£o

        // evento de clique para mostrar submenu da categoria
        btn.addEventListener("click", () => {
          submenuLateral.classList.add("active"); // mostra submenu
          submenuLateral.innerHTML = `<h3>${cat.nome}</h3>`; // t√≠tulo do submenu

          // percorre todos os subitens da categoria
          cat.subitens.forEach(sub => {
            const subBtn = document.createElement("button"); // cria bot√£o do subitem
            subBtn.textContent = sub.titulo; // texto do subitem
            subBtn.addEventListener("click", () => abrirIframe(sub.url)); // abre iframe
            submenuLateral.appendChild(subBtn); // adiciona ao submenu
          });
        });

        // adiciona bot√£o da categoria √† lista de categorias
        categoriasDiv.appendChild(btn);
      });
    })
    .catch(err => console.error("Erro ao carregar categorias:", err)); // se der erro, mostra no console

  // Resetar para o fundo inicial ao clicar no t√≠tulo
  tituloPrincipal.addEventListener("click", () => {
    submenuLateral.classList.remove("active");
    submenuLateral.innerHTML = "";
    conteudoDiv.classList.remove("sem-fundo");
    conteudoDiv.innerHTML = "";
  });

  // Resetar para o fundo inicial ao clicar no √≠cone home
  home.addEventListener("click", () => {
    submenuLateral.classList.remove("active");
    submenuLateral.innerHTML = "";
    conteudoDiv.classList.remove("sem-fundo");
    conteudoDiv.innerHTML = "";
  });
</script>

</body>
</html>
